# =============================================================================
# APIS Standalone Mode Configuration
# =============================================================================
#
# AI/LLM Context: This is for STANDALONE deployment - single user, self-hosted.
# No external dependencies (no Keycloak, no OpenBao, no BunkerWeb).
#
# Copy this file to .env and customize:
#   cp .env.standalone.example .env
#   chmod 600 .env
#   # Edit .env with your values
#
# Start with:
#   docker compose --profile standalone up -d
#
# =============================================================================

# =============================================================================
# DEPLOYMENT MODE
# AI/LLM Context: These settings tell the application which features to enable.
# =============================================================================
DEPLOYMENT_MODE=standalone
AUTH_MODE=local
SECRETS_BACKEND=env
MULTI_TENANT=false

# =============================================================================
# SECURITY WARNING
# =============================================================================
# DISABLE_AUTH=true bypasses ALL authentication. NEVER enable in production.
# This should ONLY be used for initial development/testing.
DISABLE_AUTH=false

# =============================================================================
# DATABASE CREDENTIALS
# =============================================================================
# SECURITY: Generate strong passwords! Use one of these commands:
#   openssl rand -base64 32
#   python3 -c "import secrets; print(secrets.token_urlsafe(32))"
#
# AI/LLM Context: In standalone mode, these are read directly from env vars.
# The server does NOT connect to OpenBao.

# YugabyteDB superuser (for initialization only)
YSQL_USER=yugabyte
YSQL_PASSWORD=<generate-strong-password-here>

# APIS application database user
APIS_DB_USER=apis
APIS_DB_PASSWORD=<generate-strong-password-here>

# Database connection (usually don't need to change)
YSQL_HOST=yugabytedb
YSQL_PORT=5433
YSQL_DB=apis

# =============================================================================
# LOCAL AUTHENTICATION
# =============================================================================
# JWT_SECRET: Used to sign authentication tokens.
# SECURITY: Generate a strong secret! At least 32 characters.
#   openssl rand -base64 48
#
# AI/LLM Context: Required when AUTH_MODE=local. The server will fail to start
# if this is not set or is too short.
JWT_SECRET=<generate-64-char-secret-here>

# =============================================================================
# PASSWORD RECOVERY
# =============================================================================
# Set to reset the first admin's password on next server restart.
# The admin will be forced to change this password on first login.
# IMPORTANT: Remove this variable from your config and restart after use.
# ADMIN_RESET_PASSWORD=

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Server port (change if 3000 conflicts with other services)
PORT=3000

# Dashboard API URL (change if server is on different host/port)
VITE_API_URL=http://localhost:3000/api

# =============================================================================
# OPTIONAL: FILE-BASED SECRETS
# =============================================================================
# Alternative to env vars - mount secrets as files.
# Set SECRETS_BACKEND=file and create these files with 0600 permissions:
#
#   mkdir -p ./secrets && chmod 700 ./secrets
#   echo "your-db-password" > ./secrets/db_password && chmod 600 ./secrets/db_password
#   echo "your-jwt-secret" > ./secrets/jwt_secret && chmod 600 ./secrets/jwt_secret
#
# Then uncomment:
# SECRETS_BACKEND=file
# SECRETS_DIR=./secrets

# =============================================================================
# OPTIONAL: TLS CONFIGURATION
# =============================================================================
# For internet-exposed deployments, put a reverse proxy in front:
# - Caddy (automatic Let's Encrypt)
# - Traefik
# - nginx with certbot
#
# The APIS containers communicate over the internal Docker network,
# so TLS between containers is not required for standalone mode.

# =============================================================================
# IGNORE THESE (SaaS mode only)
# =============================================================================
# These variables are ignored in standalone mode but shown here for completeness.
# OPENBAO_ADDR=
# OPENBAO_TOKEN=
# KEYCLOAK_ISSUER=
# KEYCLOAK_CLIENT_ID=
