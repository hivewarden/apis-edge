# Development Dockerfile for React dashboard
FROM node:20-alpine

WORKDIR /app

# Install dependencies first for caching
COPY package.json package-lock.json* ./
RUN npm ci

# Copy source (will be overridden by volume mount in docker-compose)
COPY . .

# Security: Run as non-root user
# Create a non-root user and group for running the application
# Using UID 1001 to avoid conflicts with system users
RUN addgroup -g 1001 -S nodejs && \
    adduser -S -u 1001 -G nodejs nodejs && \
    chown -R nodejs:nodejs /app

USER nodejs

EXPOSE 5173

CMD ["npm", "run", "dev"]
